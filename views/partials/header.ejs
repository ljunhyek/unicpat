<!DOCTYPE html>
<html lang="<%= lang === 'en' ? 'en' : 'ko' %>">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <% if (lang === 'en') { %>
    <title><%= title %> - Unic Patent Firm</title>
    <meta name="description" content="<%= typeof description !== 'undefined' ? description : 'A patent attorney with 20 years of experience providing expert solutions in patent, trademark, design applications, IP disputes, and startup consulting.' %>">
    <% } else { %>
    <title><%= title %> - 유니크 특허법률사무소</title>
    <meta name="description" content="<%= typeof description !== 'undefined' ? description : '20년 경력의 전문 변리사가 특허, 상표, 디자인 출원부터 IP 분쟁 대응, 스타트업 컨설팅까지 최고의 솔루션을 제공합니다.' %>">
    <% } %>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; color: #2F3B40; background-color: #f9fafb; overflow-x: hidden; }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 1rem; }

        .header {
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 100;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        @media (max-width: 768px) {
            .header { min-height: 90px; }
        }

        .lang-bar { border-bottom: 1px solid #f0f0f0; padding: 4px 0; }
        .lang-bar a { font-size: 0.75rem; color: #9ca3af; transition: color 0.2s; text-decoration: none; }
        .lang-bar a:hover { color: #374151; }
        .lang-bar a.lang-active { color: #374151; font-weight: 600; }
        .lang-bar .lang-sep { font-size: 0.75rem; color: #d1d5db; margin: 0 6px; }

        .nav-item { position: relative; }
        .nav-link { color: #2F3B40; font-weight: 500; position: relative; transition: color 0.3s; padding: 0.5rem 0.25rem; }
        .nav-link:hover, .nav-link.active { color: #54B435; }
        .nav-link::after { content: ''; position: absolute; width: 0; height: 2px; bottom: -2px; left: 0; background-color: #54B435; transition: width 0.3s; }
        .nav-link:hover::after, .nav-link.active::after { width: 100%; }
        .dropdown-menu { display: none; position: absolute; top: 100%; left: 50%; transform: translateX(-50%); background: white; min-width: 220px; box-shadow: 0 10px 15px rgba(0,0,0,0.1); border-radius: 4px; padding: 0.5rem 0; z-index: 100; margin-top: 10px; }
        .nav-item:hover .dropdown-menu { display: block; }
        .dropdown-item { display: block; padding: 0.75rem 1.25rem; color: #2F3B40; white-space: nowrap; transition: background 0.3s, color 0.3s; }
        .dropdown-item:hover { background: #f0fdf4; color: #54B435; }
        .footer { background: #0F172A; color: #e2e8f0; }
    </style>
</head>
<body style="padding-top: 120px;">
    <style>
        @media (max-width: 768px) {
            body { padding-top: 90px; }
        }
    </style>

    <!-- lang 값을 클라이언트 JS에 전달 -->
    <script>window.SITE_LANG = '<%= lang %>';</script>

    <header class="header">
        <!-- 언어 선택 바 -->
        <div class="lang-bar">
            <div class="container mx-auto flex justify-end items-center">
                <a href="/set-lang?lang=ko" class="<%= lang !== 'en' ? 'lang-active' : '' %>">한국어</a>
                <span class="lang-sep">|</span>
                <a href="/set-lang?lang=en" class="<%= lang === 'en' ? 'lang-active' : '' %>">English</a>
            </div>
        </div>

        <!-- 메인 네비게이션 -->
        <div class="container mx-auto py-3">
            <div class="flex justify-between items-center">

                <!-- 로고 -->
                <a href="/" class="flex items-center space-x-2">
                    <img src="/images/unique-mark.png" alt="<%= lang === 'en' ? 'Unic Patent Firm' : '유니크 특허사무소 로고 마크' %>" class="h-8">
                    <% if (lang === 'en') { %>
                    <span class="text-xl font-bold text-[#0F172A]">Unic Patent Firm</span>
                    <% } else { %>
                    <span class="flex items-center text-xl font-bold">
                        <span class="text-[#0F172A]">유니크</span>
                        <span class="text-[#2F3B40] ml-1">특허사무소</span>
                    </span>
                    <% } %>
                </a>

                <!-- 데스크탑 내비게이션 -->
                <% if (lang === 'en') { %>
                <nav class="hidden md:flex space-x-8" id="main-nav">
                    <div class="nav-item"><a href="/" class="nav-link" id="nav-home">Home</a></div>
                    <div class="nav-item"><a href="/about" class="nav-link" id="nav-about">About Unique</a></div>
                    <div class="nav-item">
                        <a href="/patent" class="nav-link" id="nav-service">Services</a>
                        <div class="dropdown-menu">
                            <a href="/patent" class="dropdown-item">Patent / Utility Model</a>
                            <a href="/trademark" class="dropdown-item">Trademark Registration</a>
                            <a href="/design" class="dropdown-item">Design Registration</a>
                            <a href="/startup" class="dropdown-item">Startup &amp; IP Services</a>
                            <a href="/dispute-transfer" class="dropdown-item">IP Dispute Resolution</a>
                        </div>
                    </div>
                    <div class="nav-item"><a href="/column" class="nav-link" id="nav-column">Unique Column</a></div>
                    <div class="nav-item"><a href="/contact" class="nav-link" id="nav-contact">Contact Us</a></div>
                </nav>
                <% } else { %>
                <nav class="hidden md:flex space-x-8" id="main-nav">
                    <div class="nav-item"><a href="/" class="nav-link" id="nav-home">홈</a></div>
                    <div class="nav-item"><a href="/about" class="nav-link" id="nav-about">유니크 소개</a></div>
                    <div class="nav-item">
                        <a href="/patent" class="nav-link" id="nav-service">서비스 안내</a>
                        <div class="dropdown-menu">
                            <a href="/patent" class="dropdown-item">특허/실용신안 출원</a>
                            <a href="/trademark" class="dropdown-item">상표 출원/등록</a>
                            <a href="/design" class="dropdown-item">디자인 출원/등록</a>
                            <a href="/startup" class="dropdown-item">창업 및 스타트업 특화 서비스</a>
                            <a href="/dispute-transfer" class="dropdown-item">IP 분쟁 대응</a>
                        </div>
                    </div>
                    <div class="nav-item"><a href="/column" class="nav-link" id="nav-column">유니크 칼럼</a></div>
                    <div class="nav-item"><a href="/newsletter" class="nav-link" id="nav-newsletter">뉴스레터</a></div>
                    <div class="nav-item"><a href="/gov-support" class="nav-link" id="nav-gov">정부지원사업 안내</a></div>
                    <div class="nav-item"><a href="/contact" class="nav-link" id="nav-contact">Contact Us</a></div>
                    <div class="nav-item"><a href="https://www.ipbot1.com" class="nav-link" id="nav-ipbot" target="_blank">실시간 특허관리</a></div>
                </nav>
                <% } %>

                <!-- 모바일 햄버거 버튼 -->
                <div class="md:hidden">
                    <button class="focus:outline-none mobile-menu-button">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <main>
